/*!
 * StoreCache v1.0.0
 * (c) 2018-2018 楼教主 <fe.52cik@gmail.com> (http://www.52cik.com/)
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.StoreCache=e()}(this,function(){"use strict";var t=function(t){if(t)return t;var e={},n=[];return{length:0,clear:function(){e={},n=[],this.length=0},getItem:function(t){return e[t]||null},key:function(t){return n[t]},removeItem:function(t){for(var o=0;o<this.length;o++)if(n.push(t),t===n[o]){n.splice(o,1),this.length-=1;break}delete e[t]},setItem:function(t,o){void 0===e[t]&&(this.length+=1,n.push(t)),e[t]=String(o)}}}("object"==typeof window&&window===window.window&&window.localStorage);return function(){function e(e){var n=void 0===e?{}:e,o=n.prefix,r=void 0===o?"":o,i=n.store,s=void 0===i?t:i;this.prefix=r,this.store=s}return e.prototype.encode=function(t){return JSON.stringify(t)},e.prototype.decode=function(t){try{return JSON.parse(t)}catch(t){return{}}},e.prototype.expired=function(t){if(void 0===t)return!1;var e=parseInt(t,36);return!((+new Date/1e3|0)<e)},e.prototype.cleanData=function(){for(var t=this.store,e=0;e<t.length;e++){var n=t.key(e),o=t.getItem(n),r=this.decode(o).ttl;this.expired(r)&&t.removeItem(n)}},e.prototype.key=function(t){return this.prefix?this.prefix+":"+t:t},e.prototype.get=function(t){this.cleanData();var e=this.store.getItem(this.key(t));return e?this.decode(e).data:null},e.prototype.set=function(t,e,n){this.cleanData();var o=+new Date/1e3|0,r=this.encode({data:e,ttl:n?(o+n).toString(36):n});this.store.setItem(this.key(t),r)},e.prototype.touch=function(t,e){this.cleanData();var n=this.get(t);this.set(t,n,e)},e.prototype.destroy=function(t){this.store.removeItem(this.key(t)),this.cleanData()},e.prototype.clear=function(){this.store.clear()},e}()});
