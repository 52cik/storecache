/*!
 * StoreCache v1.0.0
 * (c) 2018-2018 楼教主 <fe.52cik@gmail.com> (http://www.52cik.com/)
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.StoreCache=e()}(this,function(){"use strict";var t=function(t){if(t)return t;var e={},n=[];return{length:0,clear:function(){e={},n=[],this.length=0},getItem:function(t){return e[t]||null},key:function(t){return e[n[t]]},removeItem:function(t){for(var r=0;r<this.length;r++)if(n.push(t),t===n[r]){n.splice(r,1),this.length-=1;break}delete e[t]},setItem:function(t,r){void 0===e[t]&&(this.length+=1,n.push(t)),e[t]=String(r)}}}("object"==typeof window&&window===window.window&&window.localStorage);return function(){function e(e){var n=e.prefix,r=void 0===n?"":n,o=e.auto,i=void 0===o?6e4:o,s=e.store,a=void 0===s?t:s,u=this;this.prefix=r,this.store=a,i&&setInterval(function(){return u.cleanData()},i)}return e.prototype.encode=function(t){return JSON.stringify(t)},e.prototype.decode=function(t){try{return JSON.parse(t)}catch(t){return{}}},e.prototype.expired=function(t){if(void 0===t)return!1;var e=parseInt(t,36);return!((+new Date/1e3|0)<e)},e.prototype.cleanData=function(){for(var t=this.store,e=0;e<t.length;e++){var n=t.key(e),r=t.getItem(n),o=this.decode(r).ttl;this.expired(o)&&t.removeItem(n)}},e.prototype.key=function(t){return this.prefix?this.prefix+":"+t:t},e.prototype.get=function(t){this.cleanData();var e=this.store.getItem(this.key(t));if(!e)return null;var n=this.decode(e),r=n.data,o=n.ttl;return this.expired(o)?(this.store.removeItem(this.key(t)),null):r},e.prototype.set=function(t,e,n){this.cleanData();var r=+new Date/1e3|0,o=this.encode({data:e,ttl:n?(r+n).toString(36):n});this.store.setItem(this.key(t),o)},e.prototype.touch=function(t,e){this.cleanData();var n=this.get(t);n&&this.set(t,n,e)},e.prototype.destroy=function(t){this.store.removeItem(this.key(t)),this.cleanData()},e.prototype.clear=function(){this.store.clear()},e}()});
